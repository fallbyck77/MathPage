<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title> Expo Acapulco 2026 </title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- MathJax Optimization Config -->
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        renderActions: {
          addMenu: [0, '', ''] // Desactiva el menú contextual para mejorar rendimiento
        }
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
          console.log('MathJax Ready');
        }
      }
    };
    </script>
    <!-- MathJax Loader -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=JetBrains+Mono:wght@400&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        /* Contenedor de las burbujas */
.bubble-container {
    position: fixed;
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    pointer-events: none; /* El contenedor deja pasar los clics */
    z-index: 60;
    overflow: hidden;
}

/* La burbuja individual - Tornasol y Transparencia */
.soap-bubble {
    position: absolute;
    /* Iniciamos fuera de pantalla abajo */
    bottom: -100px; 
    border-radius: 50%;
    
    /* EFECTO TORNASOL: Gradiente complejo con colores espectrales muy transparentes */
    background: radial-gradient(120% 120% at 30% 30%, 
        rgba(255, 255, 255, 0.1) 10%,      /* Brillo blanco sutil */
        rgba(255, 255, 255, 0.01) 30%,     /* Transparencia central */
        rgba(120, 255, 255, 0.1) 45%,      /* Toque Cian */
        rgba(255, 120, 255, 0.1) 60%,      /* Toque Magenta */
        rgba(255, 255, 120, 0.1) 75%,      /* Toque Amarillo */
        rgba(255, 255, 255, 0.05) 90%);    /* Borde suave */
        
    /* Bordes y brillos de vidrio */
    box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.15), 
                inset 2px 2px 6px rgba(255, 255, 255, 0.1),
                0 0 5px rgba(255, 255, 255, 0.05);
    
    border: 1px solid rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(0.5px); /* Desenfoque muy leve para realismo */
    
    /* Animación principal de flotación */
    animation: floatUp var(--duration) ease-in forwards;
    
    cursor: crosshair; /* Indica que se pueden explotar */
    pointer-events: auto; /* Permite interactuar con la burbuja */
    touch-action: manipulation;
}

/* Animación de explosión (Pop) */
.burst {
    /* Sobrescribimos la animación de flotar con la de explosión */
    animation: pop 0.2s ease-out forwards !important;
    pointer-events: none; /* Ya no se puede clicar de nuevo */
}

@keyframes pop {
    0% {
        transform: scale(1);
        opacity: 0.6;
    }
    100% {
        transform: scale(2); /* Crece rápidamente */
        opacity: 0;          /* Y desaparece */
    }
}

/* Animación de subida */
@keyframes floatUp {
    0% {
        transform: translateY(0) translateX(0) scale(0.5);
        opacity: 0;
    }
    10% {
        opacity: 0.5; /* Opacidad máxima reducida para más transparencia */
    }
    90% {
        opacity: 0.5;
    }
    100% {
        transform: translateY(var(--distance)) translateX(var(--wobble)) scale(var(--scale));
        opacity: 0;
    }
}
    </style>
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #020617; 
            color: #f8fafc; 
            overflow-x: hidden; 
            -webkit-tap-highlight-color: transparent;
        }
        
        .font-serif { font-family: 'Playfair Display', serif; }
        .drop-cap::first-letter {
            float: left; font-size: 3.5rem; line-height: 0.8; font-weight: 700;
            margin-right: 0.5rem; color: #38bdf8; font-family: 'Playfair Display', serif;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .active-surface-btn {
            background: linear-gradient(90deg, rgba(56,189,248,0.2) 0%, rgba(0,0,0,0) 100%);
            border-left: 4px solid #38bdf8;
            color: white;
        }
        
        /* Estilo para los botones de la nueva sección de geometría */
        .geo-btn.active {
            background: #f43f5e;
            color: white;
            border-color: #f43f5e;
            box-shadow: 0 0 15px rgba(244, 63, 94, 0.4);
        }

        .formula-box { display: none; opacity: 0; transition: opacity 0.3s ease-in-out; }
        .formula-box.active { display: block; opacity: 1; }
        .serif-quote { font-family: 'Playfair Display', serif; }
        .play-btn-pulse { animation: shadow-pulse 2s infinite; }
        @keyframes shadow-pulse {
            0% { box-shadow: 0 0 0 0px rgba(56, 189, 248, 0.7); }
            100% { box-shadow: 0 0 0 10px rgba(56, 189, 248, 0); }
        }

        #hero-bg-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        #main-canvas-container, #geo-canvas-container { cursor: grab; touch-action: none; }
        #main-canvas-container:active, #geo-canvas-container:active { cursor: grabbing; }
        
        .math-scroll { overflow-x: auto; white-space: nowrap; padding-bottom: 4px; }
        ::-webkit-scrollbar { height: 4px; width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 2px; }

        .app-card-img {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
            transition: transform 0.5s ease;
        }
        .magnetic-card:hover .app-card-img { transform: scale(1.05); }
        .img-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(15,23,42,1) 0%, rgba(15,23,42,0.5) 50%, rgba(15,23,42,0.1) 100%);
        }

        /* Fullscreen Mode */
        .fullscreen-mode {
            position: fixed !important;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100vw !important; height: 100vh !important;
            z-index: 99999;
            background: #020617 !important;
            border-radius: 0 !important; border: none !important; margin: 0 !important;
        }
        .show-in-fs { display: none; }
        .fullscreen-mode .show-in-fs { display: block; }
        .fullscreen-mode .hide-in-fs { display: none; }
    </style>
</head>
<body class="antialiased" id="top">

    <!-- 1. CONTENEDOR DE BURBUJAS -->
    <div id="bubble-container" class="bubble-container"></div>

    <!-- Navbar -->
    <header class="fixed w-full top-0 z-50 bg-slate-950/95 backdrop-blur-md border-b border-white/10 shadow-lg">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            
            <div class="flex items-center gap-3">
                <!-- Botón Volver al Índice -->
                <a href="EventMaths.html" class="flex items-center justify-center w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white transition-colors border border-white/5" title="Volver al Índice de Geometría">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                </a>
                
                <!-- Logo -->
                <div class="flex items-center gap-2 border-l border-white/10 pl-3">
                    <span class="text-xl md:text-2xl font-black tracking-tighter text-white">π<span class="text-sky-400">lography</span></span>
                    
                </div>
            </div>
            
            <!-- Navegación Central -->
            <nav class="hidden md:flex gap-8 text-sm font-medium text-slate-400 absolute left-1/2 -translate-x-1/2">
                <a href="#geometria-basica" class="hover:text-rose-400 transition-colors">Fundamentos</a>
                <a href="#visualizador" class="hover:text-sky-400 transition-colors">Galería Completa</a>
                <a href="#aplicaciones" class="hover:text-sky-400 transition-colors">Aplicaciones</a>
            </nav>

            <div class="flex items-center gap-2 md:gap-4">
                <!-- Botón Inicio Página -->
                <a href="index.html" class="flex items-center gap-2 text-xs font-bold text-slate-400 hover:text-sky-400 transition-colors mr-2" title="Ir al inicio">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
                    <span class="hidden lg:inline">Inicio</span>
                </a>

                <div class="text-right border-l border-slate-700 pl-3 md:pl-4">
                    <span class="block text-[9px] md:text-[10px] uppercase tracking-widest text-slate-500 leading-none mb-1">Expo Matemáticas</span>
                    <span class="block text-[10px] md:text-xs font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-400 leading-none">Acapulco 2026</span>
                </div>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section class="relative min-h-[55vh] flex items-center justify-center pt-24 pb-12 overflow-hidden bg-slate-950">
        <canvas id="hero-bg-canvas"></canvas>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-slate-950/70 to-slate-950 z-1"></div>
        <div class="container mx-auto px-4 relative z-10 text-center">
            <div class="inline-block px-4 py-1.5 rounded-full border border-sky-500/30 bg-sky-500/10 backdrop-blur-md mb-6 animate-fade-in-up">
                <span class="text-sky-300 text-[10px] md:text-xs font-bold tracking-widest uppercase">Problema Isoperimétrico y Plateau</span>
            </div>
            <h1 class="text-4xl md:text-7xl font-serif font-bold text-white mb-6 drop-shadow-2xl tracking-tight leading-tight">
                Superficies <span class="text-transparent bg-clip-text bg-gradient-to-r from-sky-400 via-indigo-400 to-purple-400">Minimales</span>
            </h1>
            <p class="text-slate-300 text-sm md:text-lg max-w-2xl mx-auto mb-10 font-light leading-relaxed">
                "La naturaleza nunca gasta más de lo necesario". Desde los sólidos platónicos hasta las membranas de jabón.
            </p>
            <a href="#visualizador" class="inline-flex items-center gap-2 px-6 py-3 bg-white text-slate-950 rounded-lg font-bold hover:bg-rose-50 transition-all hover:scale-105 shadow-[0_0_20px_rgba(255,255,255,0.3)] text-sm md:text-base">
                Ver Colección
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"></path></svg>
            </a>
        </div>
    </section>

    <!-- GEOMETRÍA FUNDAMENTAL (Intro) -->
    <section id="geometria-basica" class="py-16 bg-slate-900 relative border-b border-slate-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row gap-8 items-start">
                <div class="w-full md:w-1/3 space-y-6">
                    <div>
                        <span class="text-rose-500 font-mono text-xs mb-2 block tracking-widest">00. FUNDAMENTOS</span>
                        <h2 class="text-3xl font-serif font-bold text-white mb-3">Sólidos & Polígonos</h2>
                        <p class="text-slate-400 text-sm leading-relaxed mb-6">
                            Antes de curvar el espacio, comprendamos la estructura. Desde polígonos planos (2D) hasta los sagrados Sólidos Platónicos y Prismas (3D).
                        </p>
                    </div>
                    <!-- Tarjeta estática informativa (Demo) -->
                    <div class="glass-panel p-5 rounded-xl border-l-4 border-rose-500 mt-6">
                        <h4 class="text-lg font-bold text-rose-400 mb-1">Tetraedro</h4>
                        <div class="text-xs text-slate-400 font-mono mb-3">Sólido Platónico</div>
                        <div class="grid grid-cols-3 gap-2 text-center mb-3">
                            <div class="bg-slate-950/50 p-2 rounded"><div class="text-[10px] text-slate-500">CARAS</div><div class="text-white font-bold">4</div></div>
                            <div class="bg-slate-950/50 p-2 rounded"><div class="text-[10px] text-slate-500">VÉRTICES</div><div class="text-white font-bold">4</div></div>
                            <div class="bg-slate-950/50 p-2 rounded"><div class="text-[10px] text-slate-500">ARISTAS</div><div class="text-white font-bold">6</div></div>
                        </div>
                        <div class="text-center bg-slate-800/50 rounded p-2">
                            <span class="text-[10px] text-slate-500 block mb-1">FÓRMULA DE EULER (V-A+C=2)</span>
                            <span class="font-mono text-emerald-400 text-sm">4 - 6 + 4 = 2</span>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-2/3 h-[400px] md:h-[500px] rounded-2xl overflow-hidden glass-panel relative border border-white/10 shadow-2xl">
                    <div id="geo-canvas-container" class="w-full h-full relative z-10 bg-slate-950"></div>
                    <div class="absolute bottom-4 right-4 z-20 pointer-events-none">
                         <span class="text-[10px] text-slate-500 font-mono">MODELO DEMOSTRATIVO</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FUNDAMENTOS TEÓRICOS EXHAUSTIVOS -->
    <section id="fundamentos-teoricos" class="py-20 bg-slate-900 relative border-b border-slate-800">
        <div class="container mx-auto px-4 max-w-5xl">
            
            <div class="text-center mb-16">
                <span class="text-rose-500 font-mono text-xs mb-3 block tracking-widest">MARCO TEÓRICO CONCEPTUAL</span>
                <h2 class="text-3xl md:text-5xl font-serif font-bold text-white mb-6">La Geometría de la Naturaleza</h2>
                <p class="text-slate-400 text-sm md:text-base max-w-3xl mx-auto leading-relaxed">
                    Para comprender las superficies minimales, primero debemos entender los bloques de construcción del espacio y cómo el universo decide ordenarlos.
                </p>
            </div>

            <div class="space-y-16">
                
                <!-- Definiciones Intuitivas -->
                <div class="grid md:grid-cols-2 gap-10">
                    <div class="glass-panel p-8 rounded-2xl border-t-4 border-sky-500">
                        <h3 class="text-xl font-bold text-sky-400 mb-4 font-serif">1. Polígonos y Poliedros</h3>
                        <p class="text-slate-300 text-sm leading-relaxed mb-4">
                            Un <strong>polígono</strong> es la forma 2D más simple: una porción de plano delimitada por segmentos de recta rectos (lados). Cuando todos sus lados y ángulos son idénticos, lo llamamos un <strong>polígono regular</strong> (ej. un triángulo equilátero o un cuadrado). Representan la simetría perfecta en el mundo plano.
                        </p>
                        <p class="text-slate-300 text-sm leading-relaxed">
                            Al llevar esta idea a 3D, nacen los <strong>poliedros</strong>: cuerpos geométricos sólidos cuyas caras son polígonos planos. Es decir, un poliedro es una "caja" hecha uniendo figuras planas por sus bordes (aristas), creando esquinas puntiagudas llamadas vértices.
                        </p>
                    </div>
                    <div class="glass-panel p-8 rounded-2xl border-t-4 border-indigo-500">
                        <h3 class="text-xl font-bold text-indigo-400 mb-4 font-serif">2. ¿Qué es una Superficie?</h3>
                        <p class="text-slate-300 text-sm leading-relaxed mb-4">
                            A diferencia de un poliedro rígido, una <strong>superficie</strong> es una "sábana" bidimensional continua que flota en nuestro espacio tridimensional. Piensa en una hoja de papel doblada, la superficie del mar, o la cáscara de una manzana.
                        </p>
                        <p class="text-slate-300 text-sm leading-relaxed">
                            Las superficies pueden ser planas, pero su verdadera riqueza matemática aparece cuando se <em>curvan</em>. Las matemáticas de las superficies nos permiten estudiar formas orgánicas, suaves y sin esquinas, como las que encontramos de manera natural en nuestro universo.
                        </p>
                    </div>
                </div>

                <!-- Los 5 Sólidos Platónicos -->
                <div class="glass-panel p-8 md:p-12 rounded-3xl border border-white/10 relative overflow-hidden">
                    <div class="absolute -right-20 -top-20 opacity-5 pointer-events-none">
                        <svg width="300" height="300" viewBox="0 0 100 100" fill="white"><polygon points="50,10 90,90 10,90"/></svg>
                    </div>
                    
                    <h3 class="text-2xl md:text-3xl font-bold text-white mb-6 font-serif">¿Por qué solo existen 5 Sólidos Platónicos?</h3>
                    <div class="prose prose-invert text-slate-300 text-sm md:text-base leading-relaxed max-w-none">
                        <p>
                            Un Sólido Platónico es la máxima expresión de simetría en 3D: todas sus caras son el mismo polígono regular y en cada vértice se junta el mismo número de caras. <strong>¿Por qué el universo solo permite cinco de ellos?</strong> La respuesta es maravillosamente simple y puramente geométrica.
                        </p>
                        <p>
                            Para formar un "pico" (vértice) en 3D, necesitas juntar al menos 3 caras. Además, la suma de los ángulos de las caras que se encuentran en ese vértice <strong>debe ser estrictamente menor a 360°</strong>. Si sumaran 360°, la figura quedaría totalmente plana (como un piso de losetas), y si fuera mayor, no encajarían. Vamos a probar polígonos regulares:
                        </p>
                        
                        <ul class="space-y-4 mt-6">
                            <li class="bg-white/5 p-4 rounded-lg border border-white/10">
                                <span class="text-rose-400 font-bold block mb-1">Con Triángulos Equiláteros (ángulos de 60°):</span>
                                Podemos juntar 3 (3x60°=180° $\rightarrow$ <strong>Tetraedro</strong>), 4 (4x60°=240° $\rightarrow$ <strong>Octaedro</strong>) o 5 caras (5x60°=300° $\rightarrow$ <strong>Icosaedro</strong>). Si juntamos 6 (6x60°=360°), se vuelve un plano. ¡Tres sólidos encontrados!
                            </li>
                            <li class="bg-white/5 p-4 rounded-lg border border-white/10">
                                <span class="text-sky-400 font-bold block mb-1">Con Cuadrados (ángulos de 90°):</span>
                                Podemos juntar 3 (3x90°=270° $\rightarrow$ <strong>Cubo</strong>). Si juntamos 4 (4x90°=360°), se vuelve plano (una cuadrícula perfecta). ¡Un sólido más!
                            </li>
                            <li class="bg-white/5 p-4 rounded-lg border border-white/10">
                                <span class="text-emerald-400 font-bold block mb-1">Con Pentágonos Regulares (ángulos de 108°):</span>
                                Podemos juntar 3 (3x108°=324° $\rightarrow$ <strong>Dodecaedro</strong>). Si juntamos 4, pasamos los 360° (432°). ¡El quinto sólido!
                            </li>
                            <li class="bg-white/5 p-4 rounded-lg border border-white/10">
                                <span class="text-amber-400 font-bold block mb-1">Con Hexágonos Regulares (ángulos de 120°) o mayores:</span>
                                Juntar solo 3 hexágonos da exactamente 360° (3x120°=360°). Quedan planos, como un panal de abejas. A partir del heptágono, tres caras siempre sumarán más de 360°.
                            </li>
                        </ul>
                        <p class="mt-6 font-bold text-white text-center text-lg">
                            ¡La geometría misma nos dice que la búsqueda ha terminado! No hay más combinaciones posibles en nuestro universo tridimensional.
                        </p>
                    </div>
                </div>

                <!-- Optimización en la Naturaleza -->
                <div class="grid md:grid-cols-5 gap-8 items-center bg-gradient-to-r from-emerald-900/20 to-sky-900/20 p-8 rounded-3xl border border-emerald-500/20">
                    <div class="md:col-span-3 prose prose-invert text-slate-300 text-sm md:text-base leading-relaxed">
                        <h3 class="text-2xl font-bold text-emerald-400 mb-4 font-serif">La Naturaleza como Optimizadora Perfecta</h3>
                        <p>
                            Ya vimos que la geometría dicta leyes estrictas sobre la forma. Sin embargo, la naturaleza aporta su propia ley universal: <strong>el Principio de la Mínima Acción</strong>. La naturaleza es "eficientemente perezosa"; los sistemas físicos siempre evolucionan hacia el estado que consuma o contenga la menor energía posible.
                        </p>
                        <p>
                            Piensa en una pompa de jabón conectada a un aro de alambre. El líquido tiene algo llamado "tensión superficial", una fuerza que atrae a sus moléculas entre sí. Para minimizar esta tensión (y por ende, su energía potencial), la película de jabón busca ser lo más pequeña posible. 
                        </p>
                        <p>
                            Al hacerlo, la pompa de jabón resuelve instantáneamente y sin computadoras un problema matemático colosal: <strong>Encontrar la superficie de menor área que se apoya sobre un límite dado</strong>. Así nacen las <em>Superficies Minimales</em>.
                        </p>
                    </div>
                    <div class="md:col-span-2 flex justify-center">
                        <div class="w-48 h-48 rounded-full bg-gradient-to-br from-emerald-400/20 to-sky-400/20 border border-emerald-500/30 flex items-center justify-center relative animate-pulse shadow-[0_0_50px_rgba(16,185,129,0.2)]">
                            <div class="text-center">
                                <span class="block text-emerald-300 text-xs font-mono mb-2 tracking-widest">MINIMIZACIÓN</span>
                                <span class="block text-3xl font-serif text-white">Energía $\downarrow$</span>
                                <span class="block text-xl font-serif text-sky-300 mt-2">Área $\downarrow$</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- CRÓNICA (TEORÍA EXPANDIDA Y DETALLADA) -->
    <section id="teoria" class="py-16 bg-slate-950 relative border-b border-slate-800">
        <div class="container mx-auto px-4 max-w-5xl">
            
            <!-- 01. EL ORIGEN GEOMÉTRICO Y EL PROBLEMA ISOPERIMÉTRICO -->
            <div class="mb-16">
                <span class="text-sky-500 font-mono text-xs mb-3 block tracking-widest">01. EL ORIGEN GEOMÉTRICO</span>
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-white mb-8">El Engaño de la Piel de Toro</h2>
                <div class="grid md:grid-cols-2 gap-10 items-start">
                    <div class="prose prose-invert text-slate-300 leading-relaxed text-sm md:text-base font-serif">
                        <p class="drop-cap mb-4">Llegaron a estos lugares... y compraron el suelo, que por esto llamaron Birsa, cuanto pudieron rodear con una piel de toro.</p>
                        <p class="mb-4">Así narra el poeta Virgilio en <em>La Eneida</em> el mito fundacional de Cartago. La leyenda cuenta que la reina Dido huía de Tiro y, al llegar a la costa del norte de África, pidió al rey local tanta tierra como pudiera abarcar la piel de un buey. Ante esta petición aparentemente inofensiva, el rey accedió. Dido, haciendo uso de una astucia brillante, cortó la piel en tiras finísimas, las ató formando una cuerda largísima y con ella delimitó un vasto terreno apoyándose en la costa del mar.</p>
                        <p>Sin saberlo, Dido estaba planteando y resolviendo el primer problema de optimización registrado en la historia: el <strong>Problema Isoperimétrico</strong>. En términos matemáticos, la pregunta es: <em>Dada una longitud fija de perímetro, ¿cuál es la curva plana que encierra la mayor área posible?</em> En el siglo XIX, <strong>Jacob Steiner</strong> demostró formalmente que la respuesta es el círculo. La naturaleza, al igual que la astuta reina, siempre busca hacer más con menos.</p>
                    </div>
                    <div class="glass-panel p-8 rounded-2xl relative border-t-4 border-sky-500 sticky top-24">
                        <div class="absolute top-4 right-4 text-6xl font-serif text-white opacity-5">H=0</div>
                        <h3 class="text-xl font-bold text-sky-400 mb-2">De 2D a 3D: Condición de Plateau</h3>
                        <p class="text-sm text-slate-300 mb-6 font-light">
                            Mientras en 2D maximizamos área con un perímetro fijo, en 3D el problema evoluciona: dado un contorno cerrado en el espacio, buscamos la superficie que se apoye en él teniendo el <strong>menor área posible</strong>. Para lograrlo, la curvatura media debe anularse en cada punto.
                        </p>
                        <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700 text-center mb-4">
                            <div class="math-scroll"><p class="text-2xl text-white font-serif">$$ H = \frac{k_1 + k_2}{2} = 0 $$</p></div>
                        </div>
                        <p class="text-xs text-slate-400 font-mono text-center">Donde $k_1$ y $k_2$ son las curvaturas principales.</p>
                    </div>
                </div>
            </div>

            <!-- 02. SUPERFICIES MINIMALES Y POMPAS DE JABÓN -->
            <div class="mb-16 border-t border-slate-800/50 pt-16">
                <span class="text-indigo-400 font-mono text-xs mb-3 block tracking-widest">02. LA EXPRESIÓN DE LA NATURALEZA</span>
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-white mb-8">¿Qué son las Superficies Minimales?</h2>
                <div class="prose prose-invert text-slate-300 leading-relaxed text-sm md:text-base font-serif max-w-none mb-8">
                    <p class="mb-4">Una <strong>Superficie Minimal</strong> no es simplemente una forma "pequeña". Es una superficie que resuelve de manera perfecta un problema de tensión matemática y física. Imagina que tomas un alambre, lo doblas creando un circuito tridimensional complejo, y lo sumerges en agua jabonosa. Al sacarlo, la película de jabón que se forma no es plana, ni es una burbuja redonda; adopta una forma curvada fascinante.</p>
                    <p class="mb-4">Esa película de jabón es una superficie minimal. Las moléculas de jabón se atraen entre sí, intentando ocupar el menor espacio posible para mantener la estructura unida. Físicamente, están minimizando su energía potencial. Geométricamente, están encontrando el área exacta más diminuta que puede conectar todos los puntos del alambre.</p>
                    <p>La característica clave de estas superficies es que se asemejan localmente a una "silla de montar". En cualquier punto que elijas de la superficie de jabón, si notas que se curva hacia arriba en una dirección, se curvará exactamente la misma cantidad hacia abajo en la dirección perpendicular. Esta compensación perfecta significa que su <em>curvatura media</em> es cero en todo su dominio. Las superficies minimales son el equilibrio hecho geometría.</p>
                </div>
            </div>

            <!-- 03. EL HELICOIDE -->
            <div class="mb-16 border-t border-slate-800/50 pt-16">
                <span class="text-purple-400 font-mono text-xs mb-3 block tracking-widest">03. ANATOMÍA DE UNA FORMA PURA</span>
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-white mb-8">La Arquitectura del Helicoide</h2>
                <div class="grid md:grid-cols-3 gap-10">
                    <div class="md:col-span-2 prose prose-invert text-slate-300 leading-relaxed text-sm md:text-base font-serif">
                        <p class="mb-4">Entre la infinita variedad de formas posibles, el <strong>Helicoide</strong> ocupa un lugar privilegiado en la historia de las matemáticas. Descubierto de forma independiente por Euler en 1774 y Jean Baptiste Meusnier en 1776, es una de las figuras más hipnóticas que puedes visualizar.</p>
                        <p class="mb-4">¿Cómo se construye? Para visualizar un Helicoide, primero imagina el eje de una columna vertical. Luego, imagina una <strong>hélice</strong>: una curva tridimensional que gira alrededor de ese eje elevándose constantemente, exactamente igual que la rosca de un tornillo o la espiral del ADN. Ahora, toma un segmento de línea recta y únelo desde el eje central hasta la hélice, asegurándote de que siempre esté perpendicular al eje.</p>
                        <p class="mb-4">Si deslizas esta línea recta a lo largo de toda la hélice, barriendo el espacio a su paso, crearás algo parecido a una escalera de caracol continua y fluida, donde los "escalones" no tienen separación. Esa rampa infinita es el Helicoide.</p>
                        <p>Lo que hace al Helicoide matemáticamente mágico es una paradoja hermosa: está construido <em>íntegramente por líneas rectas</em> (lo que lo define como una "superficie reglada"), pero a pesar de estar hecho de varillas rectas, todo el conjunto se curva formando una superficie minimal perfecta. De hecho, junto al plano euclidiano, el Helicoide es la única superficie en el espacio tradicional que es simultáneamente reglada y minimal.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-2xl flex flex-col justify-center items-center text-center border border-purple-500/30">
                        <div id="helicoid-demo-container" class="w-full aspect-square bg-slate-950/50 rounded-xl mb-4 relative overflow-hidden cursor-grab active:cursor-grabbing">
                            <!-- Construcción 3D generada por JS -->
                        </div>
                        <h4 class="text-white font-bold mb-2">Superficie Reglada</h4>
                        <p class="text-xs text-slate-400">Una recta barre el espacio apoyada en el eje central y la hélice, formando el Helicoide.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- VISUALIZADOR PRINCIPAL (EXTENDIDO) -->
    <section id="visualizador" class="py-12 bg-slate-900 relative">
        <div class="container mx-auto px-4 md:px-6">
            <div class="flex flex-col md:flex-row justify-between items-end mb-6">
                <div>
                    <span class="text-sky-500 font-mono text-xs mb-1 block">GALERÍA COMPLETA</span>
                    <h2 class="text-3xl font-serif font-bold text-white">Colección de Figuras</h2>
                </div>
                <div class="mt-4 md:mt-0 flex gap-4 text-[10px] text-slate-500 font-mono">
                    <span class="hidden md:block">TECLAS: [F] PROYECTAR | [←] [→] MODELO</span>
                    <span id="status-indicator" class="inline-flex items-center gap-2 px-3 py-1 bg-black/40 rounded-full border border-sky-500/30 text-sky-400">
                        <span class="w-1.5 h-1.5 rounded-full bg-sky-400 animate-pulse"></span> AUTO
                    </span>
                </div>
            </div>
            
            <div class="flex flex-col lg:grid lg:grid-cols-12 gap-6 h-auto lg:h-[600px]">
                
                <!-- CONTAINER DEL CANVAS (IZQUIERDA) -->
                <div id="canvas-wrapper" class="order-1 lg:order-2 lg:col-span-8 relative group h-[400px] lg:h-full w-full bg-slate-950 rounded-2xl overflow-hidden border border-white/10 shadow-2xl">
                    <div id="main-canvas-container" class="w-full h-full relative z-10"></div>
                    
                    <!-- Overlay de Título -->
                    <div class="absolute bottom-6 left-6 z-20 pointer-events-none" id="canvas-overlay">
                        <h3 id="surface-title" class="text-2xl md:text-4xl font-serif font-bold text-white drop-shadow-md">Catenoide</h3>
                        <p id="surface-desc" class="text-xs md:text-sm text-sky-300 font-mono bg-black/50 inline-block px-2 py-1 rounded mt-1 backdrop-blur-sm">Superficie de Revolución Minimal</p>
                    </div>

                    <!-- ETIQUETA EXPO (Visible solo en Fullscreen) -->
                    <div class="show-in-fs absolute bottom-6 right-6 z-20 pointer-events-none text-right">
                        <span class="block text-[10px] uppercase tracking-widest text-slate-400 mb-1">Expo Matemáticas</span>
                        <span class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-indigo-400">Acapulco 2026</span>
                    </div>

                    <!-- Botones -->
                    <div class="absolute top-4 right-4 z-30 flex gap-2">
                         <button onclick="toggleFullscreen()" class="bg-black/40 hover:bg-sky-500/80 backdrop-blur text-white p-2 rounded-lg transition-all border border-white/10" title="Proyectar (F)">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg>
                        </button>
                        <button id="restart-btn" onclick="toggleAutoPlay()" class="hidden bg-white/10 hover:bg-white/20 backdrop-blur text-white p-2 rounded-lg transition-all border border-white/10">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        </button>
                    </div>
                </div>

                <!-- Panel Lateral (DERECHA) - Lista con Scroll -->
                <div class="order-2 lg:order-1 lg:col-span-4 flex flex-col h-full min-h-0">
                    <div class="glass-panel p-1 rounded-xl flex-grow flex flex-col border border-white/10 overflow-hidden min-h-0">
                        <div class="p-3 border-b border-white/5 bg-white/5 mb-1 shrink-0">
                            <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider">Selector de Figuras</h4>
                        </div>
                        <div id="buttons-list" class="overflow-y-auto p-2 space-y-2 flex-grow custom-scrollbar">
                            <!-- Los botones se generarán aquí con JS -->
                        </div>
                    </div>
                    <!-- Panel Inferior Fórmulas -->
                    <div class="glass-panel p-4 rounded-xl min-h-[80px] flex items-center justify-center bg-black/20 mt-3 shrink-0">
                        <div id="formulas-container" class="w-full text-center"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- APLICACIONES -->
    <section id="aplicaciones" class="py-20 bg-slate-950 border-t border-slate-900 pb-32">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <span class="text-emerald-500 font-mono text-xs mb-2 block tracking-widest">IMPACTO REAL</span>
                <h2 class="text-3xl md:text-5xl font-serif font-bold text-white">Aplicaciones</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="glass-panel rounded-2xl overflow-hidden magnetic-card group cursor-pointer">
                    <div class="app-card-img" style="background-image: url('https://i.postimg.cc/7YJnTyx4/Olympiastadion-Munchen.jpg');"><div class="img-overlay"></div><div class="absolute bottom-4 left-5"><span class="text-[10px] font-bold bg-sky-500/90 px-2 py-0.5 rounded text-white backdrop-blur mb-2 inline-block">ARQUITECTURA</span><h3 class="text-xl font-serif font-bold text-white">Estadio de Múnich</h3></div></div>
                    <div class="p-6"><p class="text-sm text-slate-300"><strong>Frei Otto</strong> usó superficies minimales ($H=0$) para distribuir la tensión.</p></div>
                </div>
                <div class="glass-panel rounded-2xl overflow-hidden magnetic-card group cursor-pointer">
                    <div class="app-card-img" style="background-image: url('https://i.postimg.cc/gcTKJ0Pz/P4120031.jpg');"><div class="img-overlay"></div><div class="absolute bottom-4 left-5"><span class="text-[10px] font-bold bg-emerald-500/90 px-2 py-0.5 rounded text-white backdrop-blur mb-2 inline-block">BIOLOGÍA</span><h3 class="text-xl font-serif font-bold text-white">Color Estructural</h3></div></div>
                    <div class="p-6"><p class="text-sm text-slate-300">Alas de mariposa con nano-estructuras de <strong>Giroide</strong>.</p></div>
                </div>
                <div class="glass-panel rounded-2xl overflow-hidden magnetic-card group cursor-pointer">
                    <div class="app-card-img" style="background-image: url('https://i.postimg.cc/Dy4PbK2V/Reflection-in-a-soap-bubble-edit.jpg');"><div class="img-overlay"></div><div class="absolute bottom-4 left-5"><span class="text-[10px] font-bold bg-purple-500/90 px-2 py-0.5 rounded text-white backdrop-blur mb-2 inline-block">FÍSICA</span><h3 class="text-xl font-serif font-bold text-white">Jabón y Energía</h3></div></div>
                    <div class="p-6"><p class="text-sm text-slate-300">Minimización de energía potencial mediante área mínima.</p></div>
                </div>
            </div>
        </div>
    </section>

    <!-- EQUIPO DEL PROYECTO (CRÉDITOS) -->
    <section id="equipo" class="py-20 bg-slate-900 border-t border-slate-800 pb-24 relative overflow-hidden">
        <!-- Efecto de luz de fondo -->
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-3/4 h-32 bg-sky-500/10 blur-[100px] pointer-events-none"></div>
        
        <div class="container mx-auto px-4 max-w-5xl relative z-10">
            <div class="text-center mb-12">
                <span class="text-sky-500 font-mono text-xs mb-2 block tracking-widest">RECONOCIMIENTOS</span>
                <h2 class="text-3xl md:text-5xl font-serif font-bold text-white">Equipo del Proyecto</h2>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Asesor -->
                <div class="glass-panel p-8 md:p-10 rounded-3xl border-t-4 border-amber-500 flex flex-col items-center text-center justify-center relative overflow-hidden group hover:border-amber-400 transition-colors shadow-lg">
                    <div class="absolute inset-0 bg-gradient-to-b from-amber-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <div class="w-16 h-16 rounded-full bg-amber-500/20 border border-amber-500/30 flex items-center justify-center mb-6 relative z-10">
                        <svg class="w-8 h-8 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 14l9-5-9-5-9 5 9 5z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path></svg>
                    </div>
                    <span class="text-amber-400 font-mono text-xs mb-3 tracking-widest uppercase relative z-10">Asesor del Proyecto</span>
                    <h3 class="text-2xl md:text-3xl font-serif font-bold text-white mb-2 relative z-10">Dr. Efrén Morales Amaya</h3>
                    <div class="w-12 h-1 bg-amber-500/50 rounded-full mt-4 relative z-10"></div>
                </div>

                <!-- Colaboradores -->
                <div class="glass-panel p-8 md:p-10 rounded-3xl border-t-4 border-sky-500 relative overflow-hidden group hover:border-sky-400 transition-colors shadow-lg">
                    <div class="absolute inset-0 bg-gradient-to-b from-sky-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <div class="flex items-center gap-3 mb-8 justify-center relative z-10">
                        <svg class="w-5 h-5 text-sky-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        <span class="text-sky-400 font-mono text-xs tracking-widest uppercase">Colaboradores</span>
                    </div>
                    
                    <ul class="space-y-5 relative z-10 px-4 md:px-8">
                        <li class="flex items-center gap-4">
                            <div class="w-2 h-2 rounded-full bg-sky-400 shadow-[0_0_8px_#38bdf8]"></div>
                            <span class="text-slate-200 font-medium text-lg">Ulises García Moreno</span>
                        </li>
                        <li class="flex items-center gap-4">
                            <div class="w-2 h-2 rounded-full bg-indigo-400 shadow-[0_0_8px_#818cf8]"></div>
                            <span class="text-slate-200 font-medium text-lg">Joel Luna Teofilo</span>
                        </li>
                        <li class="flex items-center gap-4">
                            <div class="w-2 h-2 rounded-full bg-purple-400 shadow-[0_0_8px_#c084fc]"></div>
                            <span class="text-slate-200 font-medium text-lg">Gabriel Vasquez Tapia</span>
                        </li>
                        <li class="flex items-center gap-4">
                            <div class="w-2 h-2 rounded-full bg-rose-400 shadow-[0_0_8px_#fb7185]"></div>
                            <span class="text-slate-200 font-medium text-lg">Alexia Sahian Olea Alvarez</span>
                        </li>
                        <li class="flex items-center gap-4">
                            <div class="w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_8px_#34d399]"></div>
                            <span class="text-slate-200 font-medium text-lg">Kevin Gerardo Messina Rodriguez</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-slate-950 border-t border-white/5 py-8 text-center">
        <p class="text-slate-600 text-xs tracking-widest">KEVIN & πLOGRAPHY TEAM &bull; EXPO 2026</p>
    </footer>

    <!-- SCRIPTS -->
    <script>
        // ==========================================
        // 0. GENERADOR DE BURBUJAS
        // ==========================================
        function initBubbles() {
            const container = document.getElementById('bubble-container');
            if (!container) return;
            const createBubble = () => {
                const bubble = document.createElement('div');
                bubble.classList.add('soap-bubble');
                const size = Math.random() * 60 + 20;
                const duration = Math.random() * 10 + 5;
                const distance = -(Math.random() * 500 + 800);
                const wobble = (Math.random() - 0.5) * 200;
                const scale = Math.random() * 0.5 + 0.8;
                const left = Math.random() * 100;
                bubble.style.width = `${size}px`; bubble.style.height = `${size}px`; bubble.style.left = `${left}%`;
                bubble.style.setProperty('--duration', `${duration}s`);
                bubble.style.setProperty('--distance', `${distance}px`);
                bubble.style.setProperty('--wobble', `${wobble}px`);
                bubble.style.setProperty('--scale', `${scale}`);
                const burst = (e) => {
                    const rect = bubble.getBoundingClientRect();
                    bubble.style.animation = 'none'; bubble.style.transform = 'none'; bubble.style.position = 'fixed';
                    bubble.style.left = `${rect.left}px`; bubble.style.top = `${rect.top}px`; bubble.style.width = `${rect.width}px`; bubble.style.height = `${rect.height}px`;
                    void bubble.offsetWidth;
                    bubble.classList.add('burst');
                    setTimeout(() => { if(bubble.parentNode) bubble.remove(); }, 190);
                };
                bubble.addEventListener('click', burst);
                bubble.addEventListener('touchstart', (e) => { e.preventDefault(); burst(e); }, {passive: false});
                container.appendChild(bubble);
                bubble.addEventListener('animationend', (e) => { if (e.animationName === 'floatUp') bubble.remove(); });
            };
            setInterval(createBubble, 800);
            for(let i=0; i<15; i++) setTimeout(createBubble, Math.random() * 3000);
        }
        document.addEventListener('DOMContentLoaded', initBubbles);

        document.querySelectorAll('.magnetic-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left; const y = e.clientY - rect.top;
                const rotateX = ((y - rect.height/2) / rect.height/2) * -5;
                const rotateY = ((x - rect.width/2) / rect.width/2) * 5;
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
            });
            card.addEventListener('mouseleave', () => { card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)'; });
        });

        // ==========================================
        // 1. HERO BACKGROUND (Doble Enneper)
        // ==========================================
        (function initHero() {
            const canvas = document.getElementById('hero-bg-canvas');
            if (!canvas) return;
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 22;
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: false });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.setSize(window.innerWidth, window.innerHeight);
            const segments = 90; const limit = 1.45;
            const geometry = new THREE.ParametricGeometry((u, v, target) => {
                const r = u * limit; const theta = v * Math.PI * 2;
                const r5 = Math.pow(r, 5) / 5; const r3 = 2 * Math.pow(r, 3) / 3; const scale = 3;
                const x = scale * (r * Math.cos(theta) - r5 * Math.cos(5 * theta));
                const y = scale * (-r * Math.sin(theta) - r5 * Math.sin(5 * theta));
                const z = scale * (r3 * Math.cos(3 * theta));
                target.set(x, y, z);
            }, segments, segments);
            const material = new THREE.LineBasicMaterial({ color: 0x38bdf8, transparent: true, opacity: 0.15 });
            const mesh = new THREE.LineSegments(new THREE.WireframeGeometry(geometry), material);
            mesh.rotation.x = -Math.PI / 4; scene.add(mesh);
            const pGeo = new THREE.BufferGeometry();
            const count = window.innerWidth < 768 ? 150 : 300; const pos = new Float32Array(count * 3);
            for(let i=0; i<count*3; i++) pos[i] = (Math.random() - 0.5) * 70;
            pGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const particles = new THREE.Points(pGeo, new THREE.PointsMaterial({ size: 0.1, color: 0x818cf8 }));
            scene.add(particles);
            function animate() {
                requestAnimationFrame(animate);
                mesh.rotation.z += 0.002; mesh.rotation.y += 0.001; particles.rotation.y -= 0.0005;
                renderer.render(scene, camera);
            }
            animate();
            window.addEventListener('resize', () => {
                if(window.scrollY < window.innerHeight) {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                }
            });
        })();

        // ==========================================
        // 2. GEOMETRÍA FUNDAMENTAL (Intro - Tetraedro)
        // ==========================================
        (function initBasicGeometry() {
            const container = document.getElementById('geo-canvas-container');
            if(!container) return;
            const scene = new THREE.Scene(); scene.background = new THREE.Color('#0f172a');
            const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
            camera.position.set(0, 0, 8);
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);
            scene.add(new THREE.AmbientLight(0xffffff, 0.3));
            const light = new THREE.PointLight(0xf43f5e, 1.5); light.position.set(5, 5, 5); scene.add(light);
            const geom = new THREE.TetrahedronGeometry(2);
            const mat = new THREE.MeshPhysicalMaterial({ color: 0xf43f5e, metalness: 0.2, roughness: 0.1, transparent: true, opacity: 0.8, transmission: 0.2, side: THREE.DoubleSide });
            const mesh = new THREE.Mesh(geom, mat);
            const wf = new THREE.LineSegments(new THREE.WireframeGeometry(geom), new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.3 }));
            scene.add(mesh); scene.add(wf);
            let isDragging = false, pm = { x: 0, y: 0 };
            const toRad = (deg) => deg * (Math.PI / 180);
            container.addEventListener('mousedown', (e) => { isDragging = true; });
            container.addEventListener('mousemove', (e) => {
                if(isDragging) {
                    const delta = { x: e.offsetX - pm.x, y: e.offsetY - pm.y };
                    const q = new THREE.Quaternion().setFromEuler(new THREE.Euler(toRad(delta.y), toRad(delta.x), 0, 'XYZ'));
                    mesh.quaternion.multiplyQuaternions(q, mesh.quaternion); wf.quaternion.multiplyQuaternions(q, wf.quaternion);
                }
                pm = { x: e.offsetX, y: e.offsetY };
            });
            document.addEventListener('mouseup', () => isDragging = false);
            function animate() {
                requestAnimationFrame(animate);
                if(!isDragging) { mesh.rotation.y += 0.005; mesh.rotation.z += 0.002; wf.rotation.copy(mesh.rotation); }
                renderer.render(scene, camera);
            }
            animate();
            window.addEventListener('resize', () => {
                camera.aspect = container.clientWidth / container.clientHeight; camera.updateProjectionMatrix(); renderer.setSize(container.clientWidth, container.clientHeight);
            });
        })();

        // ==========================================
        // 3. VISUALIZADOR PRINCIPAL (EXTENDIDO)
        // ==========================================
        const container = document.getElementById('main-canvas-container');
        const wrapper = document.getElementById('canvas-wrapper');
        const listContainer = document.getElementById('buttons-list');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color('#020617');
        scene.fog = new THREE.FogExp2(0x020617, 0.025);

        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
        const isMobile = window.innerWidth < 768;
        camera.position.set(0, isMobile ? -22 : -18, isMobile ? 12 : 8);
        camera.up.set(0, 0, 1);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0xffffff, 0.4));
        const spot1 = new THREE.SpotLight(0x38bdf8, 1.5); spot1.position.set(10, -10, 20); scene.add(spot1);
        const spot2 = new THREE.PointLight(0xf43f5e, 0.8); spot2.position.set(-10, 5, 5); scene.add(spot2);

        const group = new THREE.Group();
        scene.add(group);

        // Helper para superficies paramétricas
        const createParametric = (type) => {
            const segs = isMobile ? 60 : 90;
            let geo;
            if(type === 'catenoid') {
                geo = new THREE.ParametricGeometry((u, v, t) => {
                    u *= Math.PI * 2; v = (v - 0.5) * 4; const c = 1.2;
                    t.set(c*Math.cosh(v/c)*Math.cos(u), c*Math.cosh(v/c)*Math.sin(u), v);
                }, segs, segs);
            } else if(type === 'helicoid') {
                geo = new THREE.ParametricGeometry((u, v, t) => {
                    u = (u - 0.5) * 5; v = (v - 0.5) * Math.PI * 3;
                    t.set(u*Math.cos(v), u*Math.sin(v), v);
                }, segs, segs);
            } else if(type === 'enneper') {
                geo = new THREE.ParametricGeometry((u, v, t) => {
                    u = (u - 0.5) * 3.5; v = (v - 0.5) * 3.5;
                    t.set(u - u*u*u/3 + u*v*v, v - v*v*v/3 + v*u*u, u*u - v*v);
                }, segs, segs);
            } else if(type === 'scherk') {
                const vts = [], idx = [], lim = 1.5, scale = 2.0;
                for(let i=0; i<=segs; i++) {
                    const y = -lim + (i/segs)*2*lim;
                    for(let j=0; j<=segs; j++) {
                        const x = -lim + (j/segs)*2*lim;
                        let z = 0; try { const cx = Math.cos(x), cy = Math.cos(y); z = (cx > 0.05 && cy > 0.05) ? Math.log(cy) - Math.log(cx) : NaN; } catch(e){ z=NaN; }
                        if(!isNaN(z)) z = Math.max(-4, Math.min(4, z));
                        vts.push(x*scale, y*scale, z);
                    }
                }
                for(let i=0; i<segs; i++) {
                    for(let j=0; j<segs; j++) {
                        const a = i*(segs+1)+j, b = a+1, c = a+(segs+1), d = c+1;
                        if(!isNaN(vts[a*3+2]) && !isNaN(vts[b*3+2]) && !isNaN(vts[c*3+2]) && !isNaN(vts[d*3+2])) {
                            if(Math.abs(vts[a*3+2]-vts[b*3+2]) < 2) idx.push(a, b, c);
                            if(Math.abs(vts[b*3+2]-vts[d*3+2]) < 2) idx.push(b, d, c);
                        }
                    }
                }
                geo = new THREE.BufferGeometry(); geo.setAttribute('position', new THREE.Float32BufferAttribute(vts, 3)); geo.setIndex(idx); geo.computeVertexNormals();
            }
            geo.center();
            return geo;
        };

        // DATOS COMPLETOS
        const allFigures = [
            // Polígonos
            { id: 'tri', title: "Triángulo", cat: "Polígono 2D", type: 'poly', gen: () => new THREE.CircleGeometry(2, 3), desc: "3 Lados, 3 Vértices" },
            { id: 'squ', title: "Cuadrado", cat: "Polígono 2D", type: 'poly', gen: () => new THREE.CircleGeometry(2, 4), desc: "4 Lados, 4 Vértices" },
            { id: 'pen', title: "Pentágono", cat: "Polígono 2D", type: 'poly', gen: () => new THREE.CircleGeometry(2, 5), desc: "5 Lados, 5 Vértices" },
            { id: 'hex', title: "Hexágono", cat: "Polígono 2D", type: 'poly', gen: () => new THREE.CircleGeometry(2, 6), desc: "6 Lados, 6 Vértices" },
            // Sólidos
            { id: 'tetra', title: "Tetraedro", cat: "Sólido Platónico", type: 'solid', gen: () => new THREE.TetrahedronGeometry(2), desc: "4 Caras, 4 Vértices" },
            { id: 'cube', title: "Cubo", cat: "Sólido Platónico", type: 'solid', gen: () => new THREE.BoxGeometry(2.5, 2.5, 2.5), desc: "6 Caras, 8 Vértices" },
            { id: 'octa', title: "Octaedro", cat: "Sólido Platónico", type: 'solid', gen: () => new THREE.OctahedronGeometry(2), desc: "8 Caras, 6 Vértices" },
            { id: 'dodeca', title: "Dodecaedro", cat: "Sólido Platónico", type: 'solid', gen: () => new THREE.DodecahedronGeometry(2), desc: "12 Caras, 20 Vértices" },
            { id: 'ico', title: "Icosaedro", cat: "Sólido Platónico", type: 'solid', gen: () => new THREE.IcosahedronGeometry(2), desc: "20 Caras, 12 Vértices" },
            // Prismas
            { id: 'pris_tri', title: "Prisma Triangular", cat: "Prisma", type: 'solid', gen: () => new THREE.CylinderGeometry(1.5, 1.5, 3, 3), desc: "Base Triangular" },
            { id: 'pris_hex', title: "Prisma Hexagonal", cat: "Prisma", type: 'solid', gen: () => new THREE.CylinderGeometry(1.5, 1.5, 3, 6), desc: "Base Hexagonal" },
            { id: 'cyl', title: "Cilindro", cat: "Sólido de Rev.", type: 'solid', gen: () => new THREE.CylinderGeometry(1.5, 1.5, 3, 32), desc: "Prisma de lados infinitos" },
            // Minimales
            { id: 'catenoid', title: "Catenoide", cat: "Sup. Minimal", type: 'surf', gen: () => createParametric('catenoid'), desc: "", color: 0x38bdf8 },
            { id: 'helicoid', title: "Helicoide", cat: "Sup. Minimal", type: 'surf', gen: () => createParametric('helicoid'), desc: "", color: 0xa855f7 },
            { id: 'scherk', title: "Sup. de Scherk", cat: "Sup. Minimal", type: 'surf', gen: () => createParametric('scherk'), desc: "Doble Periodicidad", color: 0x10b981 },
            { id: 'enneper', title: "Sup. de Enneper", cat: "Sup. Minimal", type: 'surf', gen: () => createParametric('enneper'), desc: "Auto-Intersección", color: 0xf43f5e }
        ];

        // Materiales
        const matSolid = new THREE.MeshPhysicalMaterial({ color: 0x38bdf8, metalness: 0.5, roughness: 0.1, transparent: true, opacity: 0.8, side: THREE.DoubleSide });
        const matSurfaceBase = new THREE.MeshPhongMaterial({ side: THREE.DoubleSide, transparent: true, opacity: 0.9, shininess: 100 });
        const matLine = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.1 });

        // Generar Botones
        function generateButtons() {
            listContainer.innerHTML = '';
            let currentCat = '';
            allFigures.forEach((item, index) => {
                // Separador de categorías
                if(item.cat !== currentCat) {
                    const sep = document.createElement('div');
                    sep.className = 'text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-4 mb-2 pl-2';
                    sep.textContent = item.cat;
                    listContainer.appendChild(sep);
                    currentCat = item.cat;
                }
                const btn = document.createElement('button');
                btn.id = `btn-${index}`;
                btn.className = `group w-full text-left p-3 rounded-lg hover:bg-white/5 transition-all border-l-2 border-transparent text-sm text-slate-300 font-medium`;
                btn.innerHTML = `<span class="block text-white font-bold">${item.title}</span><span class="text-[10px] text-slate-500">${item.desc}</span>`;
                btn.onclick = () => { stopAuto(); loadFigure(index); };
                listContainer.appendChild(btn);
            });
        }

        function loadFigure(idx, isAuto = false) {
            // Limpiar
            while(group.children.length) {
                const o = group.children[0];
                if(o.geometry) o.geometry.dispose();
                group.remove(o);
            }

            const item = allFigures[idx];
            const geo = item.gen();
            
            // Elegir material
            let mat;
            if(item.type === 'surf') {
                mat = matSurfaceBase.clone();
                mat.color.setHex(item.color);
            } else {
                mat = matSolid;
            }

            const mesh = new THREE.Mesh(geo, mat);
            const wf = new THREE.LineSegments(new THREE.WireframeGeometry(geo), matLine);
            
            if(item.type === 'poly') mesh.rotation.x = -0.2; // Mejor ángulo para 2D

            group.add(mesh);
            group.add(wf);

            // Actualizar UI Texto
            document.getElementById('surface-title').textContent = item.title;
            document.getElementById('surface-desc').textContent = item.cat + ": " + item.desc;

            // Actualizar botones activos
            document.querySelectorAll('#buttons-list button').forEach(b => {
                b.classList.remove('active-surface-btn', 'bg-white/5');
                b.classList.add('border-transparent');
            });
            const activeBtn = document.getElementById(`btn-${idx}`);
            if(activeBtn) {
                activeBtn.classList.add('active-surface-btn', 'bg-white/5');
                activeBtn.classList.remove('border-transparent');
                
                // FIX: Solo hacer scroll si NO es automático
                if(!isAuto) {
                    activeBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }
        }

        // Lógica Global
        let autoPlay = true, currentIndex = 0, timer;
        const statusEl = document.getElementById('status-indicator');
        const restartBtn = document.getElementById('restart-btn');

        window.toggleAutoPlay = () => {
            autoPlay = true; 
            statusEl.innerHTML = '<span class="w-1.5 h-1.5 rounded-full bg-sky-400 animate-pulse"></span> AUTO';
            restartBtn.classList.add('hidden'); 
            resetTimer();
        }

        function stopAuto() {
            autoPlay = false; clearInterval(timer);
            statusEl.innerHTML = '<span class="w-1.5 h-1.5 rounded-full bg-orange-400"></span> MANUAL';
            restartBtn.classList.remove('hidden');
        }

        function resetTimer() {
            clearInterval(timer);
            timer = setInterval(() => { 
                if(autoPlay) { 
                    currentIndex = (currentIndex + 1) % allFigures.length; 
                    loadFigure(currentIndex, true); // true = es automático
                } 
            }, 4000);
        }

        window.toggleFullscreen = () => {
            wrapper.classList.toggle('fullscreen-mode');
            setTimeout(onResize, 100);
        };

        // Eventos
        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight') { stopAuto(); currentIndex = (currentIndex + 1) % allFigures.length; loadFigure(currentIndex); }
            if(e.key === 'ArrowLeft') { stopAuto(); currentIndex = (currentIndex - 1 + allFigures.length) % allFigures.length; loadFigure(currentIndex); }
            if(e.key === 'f' || e.key === 'F') toggleFullscreen();
        });

        let dragging = false, lx=0, ly=0;
        container.addEventListener('mousedown', e => { dragging = true; lx=e.clientX; ly=e.clientY; stopAuto(); container.style.cursor = 'grabbing'; });
        window.addEventListener('mouseup', () => { dragging = false; container.style.cursor = 'grab'; });
        window.addEventListener('mousemove', e => { 
            if(!dragging) return;
            group.rotation.z += (e.clientX - lx) * 0.005;
            group.rotation.x += (e.clientY - ly) * 0.005;
            lx=e.clientX; ly=e.clientY;
        });
        container.addEventListener('touchstart', e => { dragging = true; lx=e.touches[0].clientX; ly=e.touches[0].clientY; stopAuto(); }, {passive:false});
        container.addEventListener('touchmove', e => { 
            if(dragging) { 
                e.preventDefault(); 
                group.rotation.z += (e.touches[0].clientX - lx) * 0.005;
                group.rotation.x += (e.touches[0].clientY - ly) * 0.005;
                lx=e.touches[0].clientX; ly=e.touches[0].clientY; 
            } 
        }, {passive:false});
        window.addEventListener('touchend', () => dragging = false);

        function onResize() {
            const w = container.clientWidth; const h = container.clientHeight;
            renderer.setSize(w, h); camera.aspect = w / h; camera.updateProjectionMatrix();
        }
        window.addEventListener('resize', onResize);

        function loop() {
            requestAnimationFrame(loop);
            if(!dragging) group.rotation.z += 0.002;
            renderer.render(scene, camera);
        }

        // ==========================================
        // 4. DEMOSTRACIÓN DE CONSTRUCCIÓN DEL HELICOIDE
        // ==========================================
        (function initHelicoidDemo() {
            const container = document.getElementById('helicoid-demo-container');
            if(!container) return;

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
            camera.position.set(0, 8, 12);
            camera.lookAt(0, 0, 0);

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // Luces
            scene.add(new THREE.AmbientLight(0xffffff, 0.6));
            const light = new THREE.PointLight(0xa855f7, 2);
            light.position.set(5, 5, 5);
            scene.add(light);

            const group = new THREE.Group();
            scene.add(group);

            // 1. Eje Central (Línea)
            const axisGeo = new THREE.BufferGeometry().setFromPoints([
                new THREE.Vector3(0, -5, 0),
                new THREE.Vector3(0, 5, 0)
            ]);
            const axisMat = new THREE.LineBasicMaterial({ color: 0x38bdf8, linewidth: 2 });
            group.add(new THREE.Line(axisGeo, axisMat));

            // 2. Hélice (Curva exterior)
            const radius = 3;
            const heightSegments = 200;
            const helixPoints = [];
            for (let i = 0; i <= heightSegments; i++) {
                const t = (i / heightSegments) * Math.PI * 6 - Math.PI * 3; // 3 vueltas
                helixPoints.push(new THREE.Vector3(radius * Math.cos(t), t, radius * Math.sin(t)));
            }
            const helixGeo = new THREE.BufferGeometry().setFromPoints(helixPoints);
            const helixMat = new THREE.LineBasicMaterial({ color: 0xa855f7, transparent: true, opacity: 0.8 });
            group.add(new THREE.Line(helixGeo, helixMat));

            // 3. Superficie Fantasma (El Helicoide completo de fondo para guiar la vista)
            const surfGeo = new THREE.ParametricGeometry((u, v, target) => {
                const r = u * radius;
                const t = v * Math.PI * 6 - Math.PI * 3;
                target.set(r * Math.cos(t), t, r * Math.sin(t));
            }, 20, 60);
            const surfMat = new THREE.MeshBasicMaterial({ color: 0xa855f7, side: THREE.DoubleSide, transparent: true, opacity: 0.1, wireframe: true });
            group.add(new THREE.Mesh(surfGeo, surfMat));

            // 4. Generatriz (La línea recta que barre la superficie)
            const genGeo = new THREE.BufferGeometry().setFromPoints([
                new THREE.Vector3(0, 0, 0),
                new THREE.Vector3(radius, 0, 0)
            ]);
            const genMat = new THREE.LineBasicMaterial({ color: 0xffffff, linewidth: 3 });
            const generatrix = new THREE.Line(genGeo, genMat);
            group.add(generatrix);

            // Controles de mouse para rotar el demo interactivamente
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
            
            container.addEventListener('mousedown', (e) => { 
                isDragging = true; 
                previousMousePosition = { x: e.offsetX, y: e.offsetY }; 
            });
            window.addEventListener('mouseup', () => { isDragging = false; });
            container.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaMove = { x: e.offsetX - previousMousePosition.x, y: e.offsetY - previousMousePosition.y };
                    group.rotation.y += deltaMove.x * 0.01;
                    group.rotation.x += deltaMove.y * 0.01;
                    previousMousePosition = { x: e.offsetX, y: e.offsetY };
                }
            });

            // Soporte Touch para móviles
            container.addEventListener('touchstart', (e) => { 
                isDragging = true; 
                previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY }; 
            }, {passive: false});
            container.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    const deltaMove = { x: e.touches[0].clientX - previousMousePosition.x, y: e.touches[0].clientY - previousMousePosition.y };
                    group.rotation.y += deltaMove.x * 0.01;
                    group.rotation.x += deltaMove.y * 0.01;
                    previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                }
            }, {passive: false});
            window.addEventListener('touchend', () => { isDragging = false; });

            let time = 0;
            function animate() {
                requestAnimationFrame(animate);
                
                // Animar la generatriz subiendo y bajando por el eje
                time += 0.025;
                const t = Math.sin(time) * Math.PI * 2.5; // Oscila arriba y abajo en el eje
                
                const p1 = new THREE.Vector3(0, t, 0); // Punto anclado en el eje central
                const p2 = new THREE.Vector3(radius * Math.cos(t), t, radius * Math.sin(t)); // Punto anclado en la hélice exterior
                generatrix.geometry.setFromPoints([p1, p2]);

                if (!isDragging) {
                    group.rotation.y += 0.005; // Rotación automática suave
                }

                renderer.render(scene, camera);
            }
            animate();

            // Resize Observer
            const ro = new ResizeObserver(() => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });
            ro.observe(container);
        })();

        // Init
        generateButtons();
        loadFigure(0, true); // Iniciar como auto para no scrollear al principio
        resetTimer();
        loop();

    </script>
</body>
</html>

